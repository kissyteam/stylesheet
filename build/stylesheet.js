modulex.add("stylesheet",["dom"],function(e,t,s){var l,n=e("dom");l=function(e){function t(e){e.el&&(e=e.el),e=this.el=i.get(e);var t=e.sheet||e.styleSheet;this.sheet=t;var s={};this.cssRules=s;var n=t&&"cssRules"in t?"cssRules":"rules";this.rulesName=n;var r,u,c,h,o=t[n];for(r=o.length-1;r>=0;r--)u=o[r],c=u.selectorText,(h=s[c])?(h.style.cssText+=";"+h.style.cssText,l(t,r)):s[c]=u}function s(e,t){return u.style.cssText=t||"",i.css(u,e),u.style.cssText}function l(e,t){e.deleteRule?e.deleteRule(t):e.removeRule&&e.removeRule(t)}function r(e,t,s,l){e.insertRule?e.insertRule(t+" {"+s+"}",l):e.addRule&&e.addRule(t,s,l)}var i=n;t.prototype={constructor:t,enable:function(){return this.sheet.disabled=!1,this},disable:function(){return this.sheet.disabled=!0,this},isEnabled:function(){return!this.sheet.disabled},set:function(e,t){var n,i=this.sheet,u=this.rulesName,c=this.cssRules,h=c[e],o=e.split(/\s*,\s*/);if(o.length>1){for(n=0;n<o.length-1;n++)this.set(o[n],t);return this}if(h){if(t=s(t,h.style.cssText))h.style.cssText=t;else for(delete c[e],n=i[u].length-1;n>=0;n--)if(i[u][n]===h){l(i,n);break}}else{var a=i[u].length;t=s(t),t&&(r(i,e,t,a),c[e]=i[u][a])}return this},get:function(e){var t,s,l,n=this.cssRules;if(e)return t=n[e],t?t.style.cssText:null;s=[];for(l in n)t=n[l],s.push(t.selectorText+" {"+t.style.cssText+"}");return s.join("\n")}};var u=document.createElement("p");return e=t}(),s.exports=l});